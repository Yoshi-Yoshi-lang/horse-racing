<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>競馬ミニゲーム</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- 外部CSS -->
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div class="header">
    <h1>競馬ミニゲーム <span id="meet-badge" class="badge f" title="標準的なばらつき">開催:普</span></h1>
    <button onclick="runRace()">New</button>
    <label style="margin-left:12px;font-size:14px;">
      <input type="checkbox" id="showReasons" onchange="runRace()"> 根拠を表示
    </label>
    <span id="money" class="money-pill"></span>
  </div>

  <!-- レースUI拡張操作 -->
  <div id="race-controls">
    <label><input type="checkbox" id="audioToggle"> サウンド</label>
    <label><input type="checkbox" id="slowToggle"> 終盤スロー</label>
    <label>応援:
      <select id="cheerSelect"></select>
    </label>
    <button id="replayBtn" disabled>リプレイ</button>
    <button id="colorBtn">馬番カラー変更</button>
  </div>

  <!-- ミニクイズ -->
  <div id="quiz" style="display:none;"></div>

  <!-- レーストラックUI -->
  <div id="race-wrap">
    <canvas id="race-paths" width="1200" height="280" style="position:absolute; left:0; top:0; width:100%; height:280px; pointer-events:none;"></canvas>
    <div id="race-track" aria-label="レース進行中のトラック"></div>
    <div id="live-board" aria-live="polite" title="ライブ順位／通過順"></div>
    <div id="commentary"></div>
  </div>

  <div class="main-grid">
    <div class="horse-info" id="horses-table"></div>
    <div class="comments" id="advices"></div>
  </div>

  <div class="input-area">
    <form id="bet-form" onsubmit="addBet(event)">
      <label>賭け方:
        <select id="bet-type" onchange="updateBetUI()">
          <option value="win">単勝</option>
          <option value="place">複勝</option>
          <option value="umaren">馬連</option>
        </select>
      </label>
      <span id="bet-inputs"></span>
      <label>金額:
        <input type="number" id="bet-amount" min="1" value="100">
      </label>
      <button type="submit">追加</button>
    </form>
    <div class="bet-list" id="bet-list"></div>
    <button onclick="finalizeBets()">確定</button>
    <span id="bets-result"></span>
  </div>

  <!-- 既存のフォールバック用進捗バーと結果 -->
  <div id="race-progress"></div>
  <div id="race-result"></div>

  <!-- カラー設定モーダル -->
  <div id="colorModal">
    <div>
      <h3 style="margin-top:0;">馬番カラー編集</h3>
      <div id="colorInputs" style="display:grid; grid-template-columns:1fr 1fr; gap:6px;"></div>
      <div style="text-align:right; margin-top:10px;">
        <button id="colorCancel">キャンセル</button>
        <button id="colorSave">保存</button>
      </div>
    </div>
  </div>

  <!-- 画像は同じフォルダに配置する想定 -->
  <!-- Girl.png / horseMen.png / OldMen.png -->

  <!-- スクリプト -->
  <script src="./script.js"></script>
</body>
</html>

